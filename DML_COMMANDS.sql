CREATE DATABASE RESTAURANT;
USE RESTAURANT;

CREATE TABLE ITEMS (
ITEM_ID VARCHAR(10) PRIMARY KEY,
ITEM_NAME VARCHAR(50) UNIQUE,
PRICE INT 
);

CREATE TABLE ORDERS (
ORDER_ID VARCHAR(10) PRIMARY KEY,
ITEM_ID INT NOT NULL
); 
CREATE TABLE CUSTOMER (
CUSTOMERID INT PRIMARY KEY,
CUS_NAME VARCHAR(100),
ITEM_ID VARCHAR(10),
ORDER_ID VARCHAR(10)
);



INSERT INTO ITEMS (ITEM_ID, ITEM_NAME, PRICE) VALUES ('G1','GULABJAMUN', 50),
												     ('R1','RASMALAI', 60),
                                                      ('K1','KACHORI', 20),
                                                       ('S1','SAMOSA', 30),
                                                        ('KA1','KALAJAMUNJAMUN', 50);
                                                        
INSERT INTO ORDERS (ORDER_ID ,ITEM_ID )VALUES ('O1','G1'),
												     ('O2','R1'),
                                                      ('O3','K1'),
                                                       ('O4','S1'),
                                                        ('O5','KA1');
	
 
INSERT INTO CUSTOMER (CUSTOMERID ,CUS_NAME, ITEM_ID,ORDER_ID )   VALUES (1,'JAMUN', 'R1','O2'),
												     (2,'MALAI','G1','O1'), 
                                                      (3,'CHORI','K1','O3'),
                                                       (4,'MOSA', 'S1','O4'),
                                                        (5,'KALAJA', 'KA1','O5');
           
                
ALTER TABLE CUSTOMER ADD COLUMN CONTACT_NUM bigint(10);
SELECT*FROM CUSTOMER ;

INSERT INTO CUSTOMER (CONTACT_NUM) VALUES (123456678),(2345678),(3456789),(4567890),(5678901);
-- TO INSERT VALUE AFTER CREATING TABLE AND INSERTING DATA
UPDATE CUSTOMER SET CONTACT_NUM = 123456678 WHERE CUSTOMERID = 1;
UPDATE CUSTOMER SET CONTACT_NUM = 2345678 WHERE CUSTOMERID = 2;
UPDATE CUSTOMER SET CONTACT_NUM = 3456789 WHERE CUSTOMERID = 3;
UPDATE CUSTOMER SET CONTACT_NUM = 4567890 WHERE CUSTOMERID = 4;
UPDATE CUSTOMER SET CONTACT_NUM = 5678901 WHERE CUSTOMERID = 5;

-- TO RENAME COLUMN 
ALTER TABLE CUSTOMER RENAME COLUMN CUS_NAME TO CUSTOMER_NAME;
-- TO RENAME TABLE
RENAME TABLE CUSTOMER TO CLIENT; -- TO RENAME TABLE NAME
-- TO CHANGE DATATYPE 
ALTER TABLE CLIENT MODIFY COLUMN CUSTOMER_NAME CHAR(50);
-- 
ALTER TABLE CLIENT DROP COLUMN CONTACT_NUM;
ALTER TABLE CLIENT ADD COLUMN CONTACT_NUM INT AFTER CUSTOMERID; 


-- ADDING COLUMNS 
ALTER TABLE CUSTOMER
ADD COLUMN EMAIL VARCHAR(30),
ADD COLUMN PHONE_NUMBER VARCHAR(10),
ADD COLUMN ADDRESS VARCHAR(100);
SELECT*FROM CUSTOMER;
UPDATE CUSTOMER SET EMAIL = 'JAMUN@123.COM' WHERE CUSTOMERID = 1;
UPDATE CUSTOMER SET EMAIL = 'MALAI@123.COM' WHERE CUSTOMERID = 2;
UPDATE CUSTOMER SET EMAIL = 'CHORI@123.COM' WHERE CUSTOMERID = 3;
UPDATE CUSTOMER SET EMAIL = 'MOSAN@123.COM' WHERE CUSTOMERID = 4;
UPDATE CUSTOMER SET EMAIL = 'KALAJA@123.COM' WHERE CUSTOMERID =5;
UPDATE CUSTOMER SET PHONE_NUMBER = 123456789 WHERE CUSTOMERID = 1;
UPDATE CUSTOMER SET PHONE_NUMBER  = 987654321 WHERE CUSTOMERID = 2;
UPDATE CUSTOMER SET PHONE_NUMBER = 7263273634 WHERE CUSTOMERID = 3;
UPDATE CUSTOMER SET PHONE_NUMBER  = 2716327136 WHERE CUSTOMERID = 4;
UPDATE CUSTOMER SET PHONE_NUMBER  = 21536235562 WHERE CUSTOMERID =5;
UPDATE CUSTOMER SET ADDRESS = 'GANESHVIHAR ' WHERE CUSTOMERID = 1;
UPDATE CUSTOMER SET EMAIL = 'MALAVIYANAGAR' WHERE CUSTOMERID = 2;
UPDATE CUSTOMER SET EMAIL = 'RAJENDRA NAGAR' WHERE CUSTOMERID = 3;
UPDATE CUSTOMER SET EMAIL = 'BADAGANPATI' WHERE CUSTOMERID = 4;
UPDATE CUSTOMER SET EMAIL = 'CHOTABHEEM' WHERE CUSTOMERID =5;


SELECT*FROM ITEMS;
ALTER TABLE ITEMS ADD COLUMN DESCRIPTIONS TEXT; 

UPDATE items
SET descriptions =
 CASE  
 WHEN ITEM_ID = 'G1' THEN '1. **Gulab Jamun**: Sweet, deep-fried dough balls soaked in sugar syrup.'
  WHEN ITEM_ID = 'K1' THEN  '2. **Kachori**: Deep-fried, savory pastry filled with spicy mixture.'
   WHEN ITEM_ID = 'KA1' THEN    '3. Kalajamun: Variant of Gulab Jamun, darker and denser.'
  WHEN ITEM_ID = 'R1' THEN     '4. **Rasmalai**: Soft cheese dumplings soaked in sweet, creamy milk.'
    WHEN ITEM_ID = 'S1' THEN   '5. **Samosa**: Triangular pastry filled with spiced potatoes or meat, fried.'
    END 
 WHERE item_id IN ('G1', 'K1', 'KA1', 'R1', 'S1');

ALTER TABLE ORDERS 
ADD COLUMN QUANTATIY INT,
ADD COLUMN ORDER_DATE date;  
SELECT*FROM ORDERS;

UPDATE ORDERS SET QUANTATIY = 
CASE 
WHEN ORDER_ID = 'O1' THEN 2
WHEN ORDER_ID = 'O2' THEN 3
WHEN ORDER_ID = 'O3' THEN 4
WHEN ORDER_ID = 'O4' THEN 5
WHEN ORDER_ID = 'O5' THEN 1
END 
 WHERE ORDER_ID IN ('O1', 'O2', 'O3', 'O4', 'O5');
 
 UPDATE ORDERS 
SET ORDER_DATE = 
    CASE 
        WHEN ORDER_ID = 'O1' THEN '2023-05-15'
        WHEN ORDER_ID = 'O2' THEN '2023-08-27'
        WHEN ORDER_ID = 'O3' THEN '2023-11-04'
        WHEN ORDER_ID = 'O4' THEN '2024-02-10'
        WHEN ORDER_ID = 'O5' THEN '2024-03-03'
    END 
WHERE ORDER_ID IN ('O1', 'O2', 'O3', 'O4', 'O5');

 
ALTER TABLE ORDERS ADD CONSTRAINT FOREIGN KEY ORDERS (ITEM_ID) REFERENCES ITEMS(ITEM_ID);
ALTER TABLE CUSTOMER ADD CONSTRAINT FOREIGN KEY CUSTOMER (ITEM_ID) REFERENCES ITEMS(ITEM_ID);
ALTER TABLE CUSTOMER ADD CONSTRAINT FK FOREIGN KEY CUSTOMER (ORDER_ID) REFERENCES ORDERS(ORDER_ID);

ALTER TABLE orders DROP FOREIGN KEY orders_ibfk_1 ;
ALTER TABLE orders DROP KEY ITEM_ID ;



SELECT*FROM ORDERS;
DESCRIBE ORDERS;
SELECT*FROM CLIENT;

-- ADD FK, DROP FK, 5 DATA,EMAIL,PN,ADDRESS -- CUSTOMER, DESCRIPTION -- ITEM TABLE, QTY, ORDERDATE -- ORDER TABLE, JOIN 24


SHOW CREATE TABLE ORDERS;

COMMIT;
                                                        